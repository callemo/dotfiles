#!/bin/sh
# Automatic code formatting.

test -f "$samfile" || { echo 'afmt: no input' >&2; exit 1; }

printf put | 9p write "acme/$winid/ctl"

type="${samfile##*.}"
case $type in
go) gofmt -w "$samfile" || { echo 'afmt: program unavailable' >&2; exit 1; };;
py) black -q "$samfile" || { echo 'afmt: program unavailable' >&2; exit 1; };;
*)  prettier --loglevel silent --write "$samfile" || { echo 'afmt: program unavailable' >&2; exit 1; };;
esac

printf get | 9p write "acme/$winid/ctl"
